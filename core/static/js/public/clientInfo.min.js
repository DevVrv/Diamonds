"use strict";class UserFormControl{constructor(t){this.kwargs=t,this.form=this._getElem(t.form),this.inputs=this._getElems(t.inputs,this.form),this.labels=this._getElems(t.labels,this.form),this.buttons=this._getElems(t.buttons,this.form),this.edit=this._getElem(t.edit,this.form),this.password=this._getElem(t.password),this.editEvent(),this.valid()}debug(t=this){return console.log(t),this}_getElem(t,e=document){const s=e.querySelector(t);return s}_getElems(t,e=document){const s=[...e.querySelectorAll(t)];return s}editEvent(){this.edit.onclick=(()=>{"show"!==this.edit.dataset.edit?(this.inputs.map(t=>{t.removeAttribute("disabled")}),this.labels.map(t=>{t.classList.add("active")}),this.buttons.map(t=>{t.removeAttribute("disabled"),t.classList.add("active")}),this.password.removeAttribute("disabled"),this.password.classList.add("active"),this.edit.dataset.edit="show",this.edit.textContent="Stop edit"):"hide"!==this.edit.dataset.edit&&(this.inputs.map(t=>{t.setAttribute("disabled","")}),this.labels.map(t=>{t.classList.remove("active")}),this.buttons.map(t=>{t.setAttribute("disabled",""),t.classList.remove("active")}),this.edit.dataset.edit="hide",this.password.setAttribute("disabled",""),this.password.classList.remove("active"),this.edit.textContent="Edit information")})}update(){this.form=this._getElem(this.kwargs.form),this.inputs=this._getElems(this.kwargs.inputs,this.form),this.labels=this._getElems(this.kwargs.labels,this.form),this.buttons=this._getElems(this.kwargs.buttons,this.form),this.edit=this._getElem(this.kwargs.edit,this.form),this.editEvent()}valid(){const t={error:'<div class="alert alert-danger mt-3 shadow-sm alert-dismissible fade show border-0" role="alert">\n                        <div class="my-2">\n                            <div class="d-flex align-items-center justify-content-center">\n                                <i class="fa fa-exclamation-triangle me-2 fs-5" aria-hidden="true"></i>\n                                <h5 class="h5 m-0 p-0">Please fill in all the required information to complete creating your account</h5>\n                            </div>\n                            <button type="button" class="btn-close shadow-none border-none" data-bs-dismiss="alert" aria-label="Close"></button>\n                        </div>\n                    </div>'},e=["first_name","email","company_email","company_name","company_tel","company_address"],s=[],i=[];e.map(t=>{s.push(this.form.querySelector(`[name="${t}"]`))}),this.form.onsubmit=(e=>{e.preventDefault();let o=!0;if(s.map(t=>{""!=t.value&&""!=t.value.replace(/\s/g,"")||(t.classList.add("form-error"),o=!1,i.push(t))}),0==o){s.map(t=>{t.onfocus=(()=>{t.classList.remove("form-error")})});const e=this.form.closest(".main").querySelector(".alert");null!=e&&e.remove(),this.form.insertAdjacentHTML("beforebegin",t.error),i.map(t=>{const e=t.closest(".client-info-managed"),s=e.previousElementSibling;e.classList.contains("active")||e.classList.add("active"),s.classList.contains("active")||s.classList.add("active")})}else 1==o&&e.target.submit()})}}class AddShipping{constructor(t){this.form=this._getElem(t.form),this.button=this._getElem(t.button),this.shipping=this._getElems(t.shipping,this.form),this.counter=this.shipping.length,this.formControl=t.formControl,this._create(t)}_create(t){this.createNewForm(t)}debug(t=this){return console.log(this),this}_getElem(t,e=document){const s=e.querySelector(t);return s}_getElems(t,e=document){const s=[...e.querySelectorAll(t)];return s}slacer(t){let e=this._getElems("input",t);e=e.filter(t=>{if("hidden"!==t.getAttribute("type"))return t}),e.map(t=>{let e=t.getAttribute("id"),s=t.getAttribute("name"),i=e.replace(0,this.counter),o=s.replace(0,this.counter);t.setAttribute("id",i),t.setAttribute("name",o),t.value=""})}createNewForm(t){this.button.onclick=(()=>{const e=this.shipping[0].cloneNode(!0);this.counter+=1,this.form.insertAdjacentElement("beforeend",e),this.totalForms=this._getElems(t.total,this.form),this.totalForms.map(t=>{t.value=this.counter}),e.dataset.shipping=this.counter;this._getElem(t.title,e).textContent=this.counter;const s=new ElementsControl({manager:".client-info-manager",managed:".client-info-managed"});s.toggler({}),this.slacer(e),this.formControl.update()})}}document.addEventListener("DOMContentLoaded",()=>{const t=new ElementsControl({manager:".client-info-manager",managed:".client-info-managed"});t.toggler({});const e=new UserFormControl({form:"#client-info-form",edit:"[data-edit]",password:"#change-password",labels:".client-info__input-group--name",inputs:".form-control-client-info",buttons:"[data-hide-btn]"});new AddShipping({form:"#client-info-form",button:"#add-shipping-address",shipping:"[data-shipping]",total:"#id_form-TOTAL_FORMS",title:"[data-shipping-title]",formControl:e})});