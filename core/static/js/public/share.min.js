"use strict";const kwargs={tigger:"#share-link",container:"#share-links-modal",exit:"#share-modal-close",with:"#share-with-price",without:"#share-without-price"};class ShareLink{constructor(e){this.tigger=this.getElement(e.tigger),this.container=this.getElement(e.container),this.exit=this.getElement(e.exit,this.container),this.with=this.getElement(e.with,this.container),this.without=this.getElement(e.without,this.container),this.messageBox=this.getElement(e.messageBox,this.container),this.shareButtons=[this.with,this.without],this.shareText=this.getElement("#messageBox",this.container),this.key=e.key,this.url=e.url,this.request={type:"0",list:"0"}}init(){this.showHide(),this.share()}getElement(e,t=document){return t.querySelector(e)}showHide(){this.tigger.addEventListener("click",()=>{this.container.classList.add("active")}),this.exit.addEventListener("click",()=>{this.container.classList.remove("active");const e=this.container.querySelector("#share_message");null!=e&&e.remove()})}message(e="success"){let t,s;"success"==e?(t="text-success",s="The link to the list of products has been copied to the clipboard"):"danger"==e||"error"==e?(t="text-danger",s="Something went wrong"):"empty"!=e&&"error"!=e||(t="text-danger",s="First select the stones you want to share");const i=`\n            <h6 class="h6 ${t} m-0 mt-3 text-center" id="share_message">${s}</h6>\n        `,h=this.container.querySelector("#share_message");null==h||null==h?this.messageBox.insertAdjacentHTML("beforeend",i):(h.remove(),this.messageBox.insertAdjacentHTML("beforeend",i))}share(){this.shareButtons.map(e=>{e.addEventListener("click",()=>{e==this.with?this.request.type="1":e==this.without&&(this.request.type="0");const t=JSON.parse(localStorage.getItem(this.key)),s=t.map(e=>e.replace("chb_",""));this.request.list=s,0==this.request.list.length?this.message("empty"):ajax(this.url,this.request,this.shared,this)})})}shared(e,t){const s=e.share_link;t.shareText.textContent=s,t.shareText.setAttribute("href",s),t.shareText.parentElement.classList.add("active")}}